<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kalshi Portfolio Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Top bar -->
    <header class="navbar">
      <div class="navbar-left">
        <h1 class="app-title">Kalshi Portfolio Dashboard</h1>
        <p class="app-subtitle">
          Simple view of how much you’ve put in, how much you’ve made, and where your money is.
        </p>
      </div>
      <div class="navbar-right">
        <div class="nav-pill">
          <span class="nav-pill-label">Account Value</span>
          <span id="nav-account-value" class="nav-pill-value">$0.00</span>
        </div>
        <div class="nav-pill">
          <span class="nav-pill-label">Net Profit</span>
          <span id="nav-net-profit" class="nav-pill-value">$0.00</span>
        </div>
      </div>
    </header>

    <main class="main">
      <!-- Quick summary cards -->
      <section class="card quick-summary">
        <div class="card-header">
          <h2>At-a-Glance Summary</h2>
          <span id="summary-generated-at" class="timestamp">Updated: –</span>
        </div>
        <div class="metrics-grid">
          <!-- Total Deposits -->
          <div class="metric-card">
            <div class="metric-label">Total Deposits</div>
            <div id="metric-deposits" class="metric-value">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>Money you’ve moved into Kalshi from Venmo/bank. This is your own cash you put in.</p>
            </details>
          </div>

          <!-- Account Value -->
          <div class="metric-card">
            <div class="metric-label">Account Value</div>
            <div id="metric-account-value" class="metric-value">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>Cash + current value of all open positions. This should match the total value shown in the Kalshi app.</p>
            </details>
          </div>

          <!-- Cash -->
          <div class="metric-card">
            <div class="metric-label">Cash (withdrawable)</div>
            <div id="metric-cash" class="metric-value">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>Money that is not tied up in any bets. You can withdraw this immediately.</p>
            </details>
          </div>

          <!-- Positions -->
          <div class="metric-card">
            <div class="metric-label">Positions Value</div>
            <div id="metric-positions-value" class="metric-value">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>What your open bets are worth right now, based on current prices.</p>
            </details>
          </div>

          <!-- Net Profit -->
          <div class="metric-card">
            <div class="metric-label">Net Profit</div>
            <div id="metric-net-profit" class="metric-value signed">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>
                Account Value − Total Deposits. This is how much you’ve truly made or lost after everything, including open
                positions.
              </p>
            </details>
          </div>

          <!-- Realized P&L -->
          <div class="metric-card">
            <div class="metric-label">Realized P&amp;L</div>
            <div id="metric-realized-pnl" class="metric-value signed">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>Profit or loss from bets that have fully settled (closed markets only).</p>
            </details>
          </div>

          <!-- Unrealized P&L -->
          <div class="metric-card">
            <div class="metric-label">Unrealized P&amp;L</div>
            <div id="metric-unrealized-pnl" class="metric-value signed">$0.00</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>Profit or loss on open bets if they cashed out at current prices.</p>
            </details>
          </div>

          <!-- ROI -->
          <div class="metric-card">
            <div class="metric-label">Return on Investment (ROI)</div>
            <div id="metric-roi" class="metric-value">0%</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>Net Profit ÷ Total Deposits. How hard your money is working overall.</p>
            </details>
          </div>

          <!-- House Money -->
          <div class="metric-card">
            <div class="metric-label">House Money %</div>
            <div id="metric-house-money" class="metric-value">0%</div>
            <details class="metric-details">
              <summary>What does this mean?</summary>
              <p>
                What percentage of your account is winnings instead of original deposits. Example: if this is 50%, half of
                your account is pure profit.
              </p>
            </details>
          </div>
        </div>
      </section>

      <!-- Charts -->
      <section class="charts-row">
        <section class="card chart-card">
          <div class="card-header">
            <h2>Profit Over Time (Realized)</h2>
          </div>
          <canvas id="pnlChart"></canvas>
        </section>

        <section class="card chart-card">
          <div class="card-header">
            <h2>Account Breakdown</h2>
          </div>
          <canvas id="breakdownChart"></canvas>
        </section>
      </section>

      <!-- Simple recent trades list -->
      <section class="card">
        <div class="card-header">
          <h2>Recent Trades (Simple View)</h2>
        </div>
        <ul id="fills-simple-list" class="trade-list">
          <li class="placeholder">Loading…</li>
        </ul>
      </section>

      <!-- Detailed tables -->
      <section class="card">
        <div class="card-header">
          <h2>Detailed Trades Table</h2>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Time</th>
              <th>Market</th>
              <th>Side</th>
              <th>Contracts</th>
              <th>Price</th>
              <th>Cost</th>
            </tr>
          </thead>
          <tbody id="fills-table-body">
            <tr>
              <td colspan="6" class="placeholder">Loading…</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section class="card">
        <div class="card-header">
          <h2>Recent Settlements</h2>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Time</th>
              <th>Market</th>
              <th>Outcome</th>
              <th>Cash Change</th>
            </tr>
          </thead>
          <tbody id="settlements-table-body">
            <tr>
              <td colspan="4" class="placeholder">Loading…</td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
